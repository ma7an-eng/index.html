<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠ - Ø¥Ù†Ø¬Ø§Ø²</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root {
            --primary-orange: #ff6b35;
            --secondary-orange: #ff8c61;
            --accent-red: #d63031;
            --text-black: #1e272e;
            --text-grey: #636e72;
            --bg-white: #f5f6fa;
            --card-white: #ffffff;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Cairo', sans-serif;
        }

        body {
            background-color: var(--bg-white);
            color: var(--text-black);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ø°Ø§ Ø·Ø§Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
            padding: 40px 20px;
        }

        .container {
            width: 100%;
            max-width: 600px;
            background: var(--card-white);
            border-radius: 20px;
            box-shadow: var(--shadow);
            overflow: hidden;
            position: relative;
            margin-bottom: 50px;
        }

        /* Header Design */
        .header {
            background: linear-gradient(135deg, var(--text-black), #2d3436);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-weight: 900;
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .header p {
            color: #b2bec3;
            font-size: 0.9rem;
        }

        /* Input Section */
        .input-group {
            padding: 25px;
            display: flex;
            gap: 10px;
            background: #fff;
            border-bottom: 2px solid #f1f1f1;
            flex-wrap: wrap;
        }

        input[type="text"], input[type="time"] {
            padding: 15px;
            border: 2px solid #dfe6e9;
            border-radius: 12px;
            font-size: 1rem;
            outline: none;
            transition: 0.3s;
        }

        input[type="text"] {
            flex: 2;
            min-width: 200px;
        }

        input[type="time"] {
            flex: 1;
        }

        input:focus {
            border-color: var(--primary-orange);
        }

        button.add-btn {
            background-color: var(--primary-orange);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: 0.3s;
            flex: 0 0 auto;
        }

        button.add-btn:hover {
            background-color: var(--secondary-orange);
            transform: translateY(-2px);
        }

        /* Task List */
        .task-list {
            list-style: none;
            padding: 20px;
            max-height: 50vh; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„Ø¥Ø¹Ø·Ø§Ø¡ Ù…Ø³Ø§Ø­Ø© Ù„Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ */
            overflow-y: auto;
        }

        .task-item {
            background: #fff;
            border: 1px solid #eee;
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .task-item:hover {
            transform: translateX(-5px);
            border-left: 5px solid var(--primary-orange);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .task-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .task-time {
            font-size: 0.85rem;
            color: var(--primary-orange);
            font-weight: 700;
            background: rgba(255, 107, 53, 0.1);
            padding: 2px 8px;
            border-radius: 4px;
            width: fit-content;
        }

        .task-text {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .actions {
            display: flex;
            gap: 10px;
        }

        .btn-action {
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: 0.3s;
        }

        .btn-check {
            background-color: #f1f2f6;
            color: #2ecc71;
        }

        .btn-check:hover {
            background-color: #2ecc71;
            color: white;
        }

        .btn-delete {
            background-color: #f1f2f6;
            color: var(--accent-red);
        }

        .btn-delete:hover {
            background-color: var(--accent-red);
            color: white;
        }

        .task-item.completed {
            opacity: 0.6;
            background-color: #fafafa;
        }

        .task-item.completed .task-text {
            text-decoration: line-through;
            color: var(--text-grey);
        }

        .task-item.completed .btn-check {
            background-color: #2ecc71;
            color: white;
        }

        /* Chart Section */
        .chart-section {
            padding: 20px;
            border-top: 2px solid #f1f1f1;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #fafafa;
        }

        .chart-wrapper {
            position: relative;
            width: 250px;
            height: 250px;
        }
        
        .chart-text {
            text-align: center;
            margin-top: 10px;
            font-weight: bold;
            color: var(--text-grey);
        }

        /* Success Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: 0.4s;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .success-card {
            background: white;
            padding: 40px;
            border-radius: 25px;
            text-align: center;
            max-width: 450px;
            width: 90%;
            transform: scale(0.7);
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-top: 10px solid var(--primary-orange);
        }

        .modal-overlay.active .success-card {
            transform: scale(1);
        }

        .success-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            display: block;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-20px);}
            60% {transform: translateY(-10px);}
        }

        .quote-box {
            background: #fff8f5;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-right: 4px solid var(--primary-orange);
            font-style: italic;
            color: var(--text-black);
            line-height: 1.6;
        }

        .quote-author {
            display: block;
            margin-top: 10px;
            font-weight: 700;
            color: var(--text-grey);
            font-size: 0.9rem;
        }

        .close-modal {
            background: var(--text-black);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            transition: 0.3s;
        }

        .close-modal:hover {
            background: var(--primary-orange);
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: var(--text-grey);
            display: none;
        }
        
        .empty-state.visible {
            display: block;
        }

    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <h1>Ù‚Ø§Ø¦Ù…Ø© Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙŠ</h1>
            <p>Ù†Ø¸Ù… ÙˆÙ‚ØªÙƒØŒ Ø­Ù‚Ù‚ Ø£Ù‡Ø¯Ø§ÙÙƒØŒ ÙˆØ§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ø±Ø­Ù„Ø©</p>
        </div>

        <div class="input-group">
            <input type="text" id="taskInput" placeholder="Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ Ø£Ù† ØªÙ†Ø¬Ø² Ø§Ù„ÙŠÙˆÙ…ØŸ">
            <input type="time" id="timeInput">
            <button class="add-btn" onclick="addTask()">Ø¥Ø¶Ø§ÙØ© +</button>
        </div>

        <ul class="task-list" id="taskList">
            </ul>
        
        <div class="empty-state" id="emptyState">
            Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… Ø­Ø§Ù„ÙŠØ§Ù‹.. Ø§Ø¨Ø¯Ø£ ÙŠÙˆÙ…Ùƒ Ø¨Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©! ğŸš€
        </div>

        <div class="chart-section" id="chartSection">
            <h3 style="margin-bottom:15px; font-size: 1rem; color:var(--text-black)">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠ</h3>
            <div class="chart-wrapper">
                <canvas id="progressChart"></canvas>
            </div>
            <p class="chart-text" id="progressText">0% Ù…ÙƒØªÙ…Ù„</p>
        </div>
    </div>

    <div class="modal-overlay" id="successModal">
        <div class="success-card">
            <span class="success-icon">ğŸ‰</span>
            <h2 style="margin-bottom: 10px; color: var(--text-black);">Ø£Ø­Ø³Ù†Øª ÙŠØ§ Ø¨Ø·Ù„!</h2>
            <p style="color: var(--text-grey);">Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ø¬Ù…ÙŠØ¹ Ù…Ù‡Ø§Ù…Ùƒ Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ….</p>
            
            <div class="quote-box">
                <span id="dailyQuote">"Ø§Ù„Ù†Øµ Ù‡Ù†Ø§"</span>
                <span class="quote-author" id="quoteAuthor">- Ø§Ù„Ù…Ø¤Ù„Ù</span>
            </div>

            <button class="close-modal" onclick="closeModal()">Ø¥ØºÙ„Ø§Ù‚ ÙˆÙ…ØªØ§Ø¨Ø¹Ø©</button>
        </div>
    </div>

    <script>
        // --- Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„ØªØ´ØºÙŠÙ„ ---
        
        // 1. Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ù‚ØªØ¨Ø§Ø³Ø§Øª
        const quotes = [
            { text: "Ø§Ù„Ø³Ø± ÙÙŠ Ø§Ù„Ù…Ø¶ÙŠ Ù‚Ø¯Ù…Ø§Ù‹ Ù‡Ùˆ Ø§Ù„Ø¨Ø¯Ø¡.", author: "Ù…Ø§Ø±Ùƒ ØªÙˆÙŠÙ†" },
            { text: "Ù„Ø§ ØªÙ†ØªØ¸Ø±ØŒ ÙØ§Ù„ÙˆÙ‚Øª Ù„Ù† ÙŠÙƒÙˆÙ† Ù…Ù†Ø§Ø³Ø¨Ø§Ù‹ ØªÙ…Ø§Ù…Ø§Ù‹ Ø£Ø¨Ø¯Ø§Ù‹.", author: "Ù†Ø§Ø¨Ù„ÙŠÙˆÙ† Ù‡ÙŠÙ„" },
            { text: "Ø§Ù„Ù†Ø¬Ø§Ø­ Ù‡Ùˆ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù…Ù† ÙØ´Ù„ Ø¥Ù„Ù‰ ÙØ´Ù„ Ø¯ÙˆÙ† ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø­Ù…Ø§Ø³.", author: "ÙˆÙŠÙ†Ø³ØªÙˆÙ† ØªØ´Ø±Ø´Ù„" },
            { text: "Ù…Ø§ Ù†Ø£Ù…Ù„ Ø£Ù† Ù†ÙØ¹Ù„Ù‡ Ø¨Ø³Ù‡ÙˆÙ„Ø©ØŒ Ø¹Ù„ÙŠÙ†Ø§ Ø£Ù† Ù†ÙØ¹Ù„Ù‡ Ø£ÙˆÙ„Ø§Ù‹ Ø¨Ø§Ø¬ØªÙ‡Ø§Ø¯.", author: "ØµÙ…ÙˆØ¦ÙŠÙ„ Ø¬ÙˆÙ†Ø³ÙˆÙ†" },
            { text: "Ø§Ù„Ø¥Ù†Ø¶Ø¨Ø§Ø· Ù‡Ùˆ Ø§Ù„Ø¬Ø³Ø± Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‡Ø¯Ø§Ù ÙˆØ§Ù„Ø¥Ù†Ø¬Ø§Ø².", author: "Ø¬ÙŠÙ… Ø±ÙˆÙ†" },
            { text: "Ù…Ø³ØªÙ‚Ø¨Ù„Ùƒ ÙŠÙØµÙ†Ø¹ Ø¨Ù…Ø§ ØªÙØ¹Ù„Ù‡ Ø§Ù„ÙŠÙˆÙ…ØŒ ÙˆÙ„ÙŠØ³ Ø¨Ù…Ø§ Ø³ØªÙØ¹Ù„Ù‡ ØºØ¯Ø§Ù‹.", author: "Ø±ÙˆØ¨Ø±Øª ÙƒÙŠÙˆØ³Ø§ÙƒÙŠ" },
            { text: "Ø§Ù„Ø£Ù„Ù… Ù…Ø¤Ù‚ØªØŒ Ø£Ù…Ø§ Ø§Ù„Ø§Ø³ØªØ³Ù„Ø§Ù… ÙÙŠØ¯ÙˆÙ… Ù„Ù„Ø£Ø¨Ø¯.", author: "Ù„Ø§Ù†Ø³ Ø£Ø±Ù…Ø³ØªØ±ÙˆÙ†Ø¬" },
            { text: "Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ÙˆØ­ÙŠØ¯Ø© Ù„Ù„Ù‚ÙŠØ§Ù… Ø¨Ø¹Ù…Ù„ Ø¹Ø¸ÙŠÙ… Ù‡ÙŠ Ø£Ù† ØªØ­Ø¨ Ù…Ø§ ØªÙØ¹Ù„Ù‡.", author: "Ø³ØªÙŠÙ Ø¬ÙˆØ¨Ø²" },
            { text: "Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø§Ù„Ø¹Ø¸ÙŠÙ…Ø© Ù„Ø§ ØªØ£ØªÙŠ Ù…Ù† Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø±Ø§Ø­Ø©.", author: "Ø±ÙˆÙŠ Ø¨ÙŠÙ†ÙŠØª" },
            { text: "Ø§ÙØ¹Ù„ Ù…Ø§ ØªØ³ØªØ·ÙŠØ¹ØŒ Ø¨Ù…Ø§ Ù„Ø¯ÙŠÙƒØŒ Ø­ÙŠØ«Ù…Ø§ ÙƒÙ†Øª.", author: "Ø«ÙŠÙˆØ¯ÙˆØ± Ø±ÙˆØ²ÙÙ„Øª" },
            { text: "Ù„Ø§ ØªØ­Ø³Ø¨ Ø§Ù„Ø£ÙŠØ§Ù…ØŒ Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø£ÙŠØ§Ù… ØªØ­Ø³Ø¨.", author: "Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ ÙƒÙ„Ø§ÙŠ" },
            { text: "Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø³ØªØ­ÙŠÙ„ ÙˆØ§Ù„Ù…Ù…ÙƒÙ† ÙŠØªÙˆÙ‚Ù Ø¹Ù„Ù‰ Ø¹Ø²ÙŠÙ…Ø© Ø§Ù„Ù…Ø±Ø¡ ÙˆØ¥ØµØ±Ø§Ø±Ù‡.", author: "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯" },
            { text: "Ù‚Ù„ÙŠÙ„ Ø¯Ø§Ø¦Ù… Ø®ÙŠØ± Ù…Ù† ÙƒØ«ÙŠØ± Ù…Ù†Ù‚Ø·Ø¹.", author: "Ø­Ø¯ÙŠØ« Ø´Ø±ÙŠÙ" },
            { text: "Ø§Ù„ÙˆÙ‚Øª ÙƒØ§Ù„Ø³ÙŠÙ Ø¥Ù† Ù„Ù… ØªÙ‚Ø·Ø¹Ù‡ Ù‚Ø·Ø¹Ùƒ.", author: "Ù‚ÙˆÙ„ Ù…Ø£Ø«ÙˆØ±" },
            { text: "Ø§Ù„ÙØ´Ù„ Ù„ÙŠØ³ Ø³ÙˆÙ‰ ÙØ±ØµØ© Ù„Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯ Ø¨Ø°ÙƒØ§Ø¡ Ø£ÙƒØ¨Ø±.", author: "Ù‡Ù†Ø±ÙŠ ÙÙˆØ±Ø¯" }
        ];

        let tasks = JSON.parse(localStorage.getItem('myDailyTasks')) || [];
        let myChart = null; // Ù…ØªØºÙŠØ± Ù„Ø­ÙØ¸ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ

        function saveToLocal() {
            localStorage.setItem('myDailyTasks', JSON.stringify(tasks));
        }

        // --- ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ ---
        function initChart() {
            const ctx = document.getElementById('progressChart').getContext('2d');
            
            // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ø§Ø±Øª Ø§Ù„Ù…Ø¨Ø¯Ø¦ÙŠØ©
            myChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Ù…ÙƒØªÙ…Ù„', 'Ù…ØªØ¨Ù‚ÙŠ'],
                    datasets: [{
                        data: [0, 1],
                        backgroundColor: [
                            '#ff6b35', // Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ Ù„Ù„Ø¥Ù†Ø¬Ø§Ø²
                            '#dfe6e9'  // Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø±Ù…Ø§Ø¯ÙŠ Ù„Ù„Ù…ØªØ¨Ù‚ÙŠ
                        ],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    cutout: '70%', // Ø­Ø¬Ù… Ø§Ù„ÙØ±Ø§Øº ÙÙŠ Ø§Ù„ÙˆØ³Ø·
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: false }
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true
                    }
                }
            });
        }

        // ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ
        function updateChart() {
            if (!myChart) return;

            const total = tasks.length;
            const completed = tasks.filter(t => t.completed).length;
            const remaining = total - completed;

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            if (total === 0) {
                // Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù‡Ù†Ø§Ùƒ Ù…Ù‡Ø§Ù…ØŒ Ù†Ø¹Ø±Ø¶ Ø¯Ø§Ø¦Ø±Ø© Ø±Ù…Ø§Ø¯ÙŠØ© ÙƒØ§Ù…Ù„Ø©
                myChart.data.datasets[0].data = [0, 1];
                myChart.data.datasets[0].backgroundColor = ['#ff6b35', '#f1f1f1'];
                document.getElementById('progressText').innerText = "0% Ù…ÙƒØªÙ…Ù„";
            } else {
                myChart.data.datasets[0].data = [completed, remaining];
                // ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¥Ø°Ø§ Ø§ÙƒØªÙ…Ù„ ÙƒÙ„ Ø´ÙŠØ¡
                if (remaining === 0) {
                     myChart.data.datasets[0].backgroundColor = ['#2ecc71', '#dfe6e9']; // Ø£Ø®Ø¶Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡
                } else {
                     myChart.data.datasets[0].backgroundColor = ['#ff6b35', '#dfe6e9']; // Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„
                }
                
                const percentage = Math.round((completed / total) * 100);
                document.getElementById('progressText').innerText = `${percentage}% Ù…ÙƒØªÙ…Ù„ (${completed} Ù…Ù† ${total})`;
            }

            myChart.update();
        }

        // --- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù… ---

        function renderTasks() {
            const list = document.getElementById('taskList');
            const emptyState = document.getElementById('emptyState');
            list.innerHTML = '';

            if (tasks.length === 0) {
                emptyState.classList.add('visible');
            } else {
                emptyState.classList.remove('visible');
            }

            tasks.sort((a, b) => a.completed - b.completed || a.time.localeCompare(b.time));

            tasks.forEach(task => {
                const li = document.createElement('li');
                li.className = `task-item ${task.completed ? 'completed' : ''}`;
                li.innerHTML = `
                    <div class="task-info">
                        ${task.time ? `<span class="task-time">${formatTime(task.time)}</span>` : ''}
                        <span class="task-text">${task.text}</span>
                    </div>
                    <div class="actions">
                        <button class="btn-action btn-check" onclick="toggleTask(${task.id})" title="Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù‡Ù…Ø©">
                            ${task.completed ? 'âœ”' : 'â—‹'}
                        </button>
                        <button class="btn-action btn-delete" onclick="deleteTask(${task.id})" title="Ø­Ø°Ù">
                            âœ•
                        </button>
                    </div>
                `;
                list.appendChild(li);
            });

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø§Ø±Øª ÙÙŠ ÙƒÙ„ Ù…Ø±Ø© Ù†ØºÙŠØ± ÙÙŠÙ‡Ø§ Ø§Ù„Ù…Ù‡Ø§Ù…
            updateChart();
        }

        function addTask() {
            const input = document.getElementById('taskInput');
            const timeInput = document.getElementById('timeInput');
            
            if (input.value.trim() === '') {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©!');
                return;
            }

            const newTask = {
                id: Date.now(),
                text: input.value,
                time: timeInput.value,
                completed: false
            };

            tasks.push(newTask);
            saveToLocal();
            renderTasks();
            
            input.value = '';
            timeInput.value = '';
        }

        function deleteTask(id) {
            if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‡Ù…Ø©ØŸ')) {
                tasks = tasks.filter(t => t.id !== id);
                saveToLocal();
                renderTasks();
            }
        }

        function toggleTask(id) {
            const task = tasks.find(t => t.id === id);
            if (task) {
                task.completed = !task.completed;
                saveToLocal();
                renderTasks();
                
                // ÙØ­Øµ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø§Ø­ØªÙØ§Ù„
                // Ù†Ø³ØªØ®Ø¯Ù… SetTimeout ØµØºÙŠØ± Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø´Ø§Ø±Øª ØªØ­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹
                setTimeout(() => {
                    checkAllCompleted();
                }, 300);
            }
        }

        function formatTime(timeString) {
            const [hour, minute] = timeString.split(':');
            const date = new Date();
            date.setHours(hour);
            date.setMinutes(minute);
            return date.toLocaleTimeString('ar-SA', { hour: '2-digit', minute: '2-digit' });
        }

        function checkAllCompleted() {
            if (tasks.length > 0 && tasks.every(t => t.completed)) {
                showCelebration();
            }
        }

        function showCelebration() {
            const modal = document.getElementById('successModal');
            const quoteText = document.getElementById('dailyQuote');
            const quoteAuthor = document.getElementById('quoteAuthor');

            const dayOfYear = Math.floor((new Date() - new Date(new Date().getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);
            const quoteIndex = dayOfYear % quotes.length;
            
            quoteText.textContent = `"${quotes[quoteIndex].text}"`;
            quoteAuthor.textContent = `- ${quotes[quoteIndex].author}`;

            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('successModal').classList.remove('active');
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        // Ù†Ù†ØªØ¸Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø´Ø§Ø±Øª
        window.onload = function() {
            initChart();
            renderTasks();
        };

        document.getElementById('taskInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                addTask();
            }
        });

    </script>
</body>
</html>

